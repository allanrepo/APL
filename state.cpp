#include <state.h>

/* ------------------------------------------------------------------------------------------
constructor
------------------------------------------------------------------------------------------ */
CStateManager::CState::CState(const std::string& name)
{
	m_szName = name;
}


/* ------------------------------------------------------------------------------------------
destructor
------------------------------------------------------------------------------------------ */
CStateManager::CState::~CState()
{
}

/* ------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------ */
void CStateManager::CState::run()
{
}

/* ------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------ */
void CStateManager::CState::load()
{
}

/* ------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------ */
void CStateManager::CState::unload()
{
}

/* ------------------------------------------------------------------------------------------
constructor
------------------------------------------------------------------------------------------ */
CStateManager::CStateManager()
{
	m_pNext = 0;
	m_pState = 0;
}


/* ------------------------------------------------------------------------------------------
destructor
------------------------------------------------------------------------------------------ */
CStateManager::~CStateManager()
{
}

/* ------------------------------------------------------------------------------------------
state manager's loop function
-	right now, let's handle elapsed time calculation internally. by right this 
	class should not do it because time or elapsed time may be needed by other
	objects in the application that also uses this class so a timer class must
	handle this instead. but let's do that later once we realized we need it
	so we can design the time class the best way we need it to be
------------------------------------------------------------------------------------------ */
void CStateManager::run()
{
	while(1)
	{
		// snapshot time now

		// is this the first time you run? elapsed time should be 

		// are we switching to new state? 
		if (m_pNext)
		{
			if (m_pState) m_pState->unload();
			m_pState = m_pNext;
			m_pNext = 0;
			m_pState->load();
		}

		// whatever the current state is, let's run it
		if (m_pState) m_pState->run();
	}
}

/* ------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------ */
void CStateManager::load()
{
}

/* ------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------ */
void CStateManager::unload()
{
}

/* ------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------ */
void CStateManager::set( CState* pState )
{
	m_pNext = pState;
}

/* ------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------ */
void CStateManager::clear()
{
}

